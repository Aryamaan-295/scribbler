<!DOCTYPE html>
<html lang="en" >
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="icon"  href="images/logo2.png">
		<meta name="description" content="A notebook for experimenting in JavaScript">
		<script>global=globalThis</script>
		<title>Javascript Notebook</title>
		<link rel="stylesheet" href="css/pico.min.css">
		<link rel="stylesheet" href="css/style.css">

		
		
		<script src="codemirror/codemirror.js"></script>
		<link rel="stylesheet" href="codemirror/codemirror.css">
		<script src="codemirror/javascript.js"></script>
		<script src="js/libs.js"></script>
		<script src="js/controller.js"></script>
		<script src="js/worker.js"></script>


  </head>
  <body data-theme="light" >
	
	<nav>
	  <ul>
	    <li><img src='images/logo2.png' id="logo"/></li>
	    <li><a id="nb_name" contentEditable="true">Untitled Notebook</a></li>
	    <li role="list" dir="rtl">
	      <a href="#" aria-haspopup="listbox">File</a>
	      <ul role="listbox">
	        <li><a onclick="load_file_click()">Load a notebook</a> 
	        <input style="display:none" type="file" id="upload_file"  />  
	        </li>
	        <li><a onclick="download_nb()">Download as notebook</a></li>
	        <li><a onclick="download_html(false)">Download as HTML</a></li>
	        <li><a onclick="download_html(true)">Download only output</a></li>
	      </ul>
	    </li>
	    <li role="list" dir="rtl">
	      <a href="#" aria-haspopup="listbox">Edit</a>
	      <ul role="listbox">
	        <li><a onclick="insert_cell('code')">Insert code cell</a></li>
	        <li><a onclick="insert_cell('html')">Insert html cell</a></li>

	      </ul>
	    </li>
	    
	  </ul>
	  <ul>
	    <li >
	      <a href="#" onclick="run_all()" role="button" style="margin-right:5px">&#9658;</a>

	    </li>
	    <li><a href="https://github.com/gopi-suvanam/jsnb" role="button" >Github</a></li>
	  </ul>
	</nav>
	<hr>
	<div id="code_block_template" style="display:none">
		<div id="cell_menu_block_id" class="cell-menu">
			<input title="Toggle between code and html" id="cell_type_block_id" style="height:15px;" type="checkbox" checked="true" role="switch">
			<a title="Run the cell: Shift-Enter"   onclick="run(_block_id)">&#9658;</a>
			<a  title="Move the cell up"   onclick="move_up(_block_id)">&#8593;</a>
			<a title="Move the cell down"    onclick="move_down(_block_id)">&#8595;</a>
			<a  title="Add a cell bellow: Alt/Option-Enter"  onclick="insert_cell('code',_block_id)">&#10011;</a>
			<a  title="Delete the cell"  onclick="delete_cell(_block_id)">&#9747;</a>
			
		</div>
		<div id="input_block_id" tabindex="0" onfocusout="unfocus_editor(_block_id)" class='code'></div>
		<article id="result_block_id" onclick="open_editor(_block_id)">
			<p class="status" id="status_block_id"></p>
			<div class="output" id="output_block_id"></div>
		</article>
	</div>
	
	
	<div style="width:98%" class='container' id='main'></div>	
		
  </body>
  <script>
  	url=window.location.href.split("#")[1];
  	if(url!=undefined & url.length>1)
  	 read_file(url,load_jsnb,err=>{alert(err.message)});
  	else insert_cell('code');
  	
  	const file_loader = document.getElementById("upload_file");
  	
	
	load_file_click=function(){
	  if (file_loader) {
	    file_loader.click();
	  }
	};


  	
  	file_loader.addEventListener("change", handleFiles, false);
  	

	
  </script>
</html>
