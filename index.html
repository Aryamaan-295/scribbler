<!DOCTYPE html>
<html style="height:100%"  lang="en" >
	<head>
		<!-- Meta data for SEO etc -->
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="icon"  href="images/logo2.png">
		<meta name="description" content="JSNB: A notebook for experimenting in JavaScript. Play with html and javascript using simple interface (without servers and backend deployment). All the computation happens in your browser.">
		<script>global=globalThis</script>
		<title>Scribbler: JavaScript Notebook</title>

		<!-- Styling using pico.css and some custome css -->
		<link rel="stylesheet" href="css/pico.min.css">
		<link rel="stylesheet" href="css/style.css">


		<!-- Controllers and libs -->
		<script src="js/libs.js"></script> <!-- libs for some functionality -->
		<script src="js/controller.js"></script> <!-- Controls the UI -->
		<script src="js/github.js"></script> <!-- Functions for pushing and pulling from/to Github -->
		<script src="js/modal.js"></script> <!-- Modal/popup handling -->
		

	</head>
  <body style="height:100%" data-theme="light" >
	<nav> <!-- Menu bar -->
	  <ul>
	    <li><img src='images/logo2.png' id="logo"/></li>
	    <li >
	    	<details role="list" dir="ltr">
	      <summary tabindex="0" aria-haspopup="listbox">File</summary>
	      <ul role="listbox">
	        <li><a href="." target="_blank">New </a></li>
		<li><a onclick="load_file_click()">Open (Ctrl-O)</a></li>
	        <li><a onclick="download_nb()">Download (Ctr-S)</a></li>
	        <li><a data-target="git-import-export" onClick="toggleModal(event)">GitHub (Gtr-G)</a></li>
	        <li><a onclick="download_html(false)">Download as HTML</a></li>
	        <li><a onclick="download_html(true)">Download only output</a></li>
	        <li><a onclick="download_js()">Download as JS</a></li>
	        <li><a data-target="options" onClick="toggleModal(event)">Options</a></li>
	      </ul>
	      </details>
	    </li>
	    <li role="list" dir="ltr">
	    	<details role="list" dir="ltr">
	      <summary tabindex="0" aria-haspopup="listbox">Edit</summary>
	      <ul role="listbox">
	        <li><a onclick="insert_cell('code')">Insert code cell</a></li>
	        <li><a onclick="insert_cell('html')">Insert html cell</a></li>
	        <li><a onclick="insert_cell('style')">Insert style cell</a></li>
	      </ul>
	      </details>
	    </li>
	    <li role="list" dir="ltr">
	    <details role="list" dir="ltr">
	      <summary tabindex="0" aria-haspopup="listbox">Help</summary>
	      <ul role="listbox">
	        <li><a href='https://github.com/gopi-suvanam/jsnb/blob/main/DOCS.md' target='_blank'>Docs</a></li>
	        <li><a href="https://github.com/gopi-suvanam/jsnb/blob/main/examples/README.md" target='_blank'>Sample Notebooks</a></li>
	      </ul>
	      </details>
	    </li>
	  </ul>
	  <div style="flex-grow:0.9"></div>
	  <ul>
	  	
	    <li >
	      <a href="#" class="secondary" data-tooltip="Run all: Alt/Option-R" data-placement="bottom" onclick="event.preventDefault();run_all()"  style="margin-right:5px">&#9658;</a>
	    </li>
	    <li>
	   	<a href="https://github.com/gopi-suvanam/jsnb/" id="github_link" role="button" class="secondary" >Git</a> 
	    </li>
	  </ul>
	</nav>
	
	
	<iframe id="sandbox" style="width:100%;height:100%" credentialless src="sandbox.html" sandbox="allow-scripts allow-downloads allow-top-navigation-by-user-activation"></iframe>
	
	
	
	
	<footer style="padding:0px;text-align:center;border-top:thin black solid">
		<span style="margin:auto">Crafted with <span style="color:red">&hearts;</span> for JavaScript</span>
	</footer>	
	
	<dialog id="git-import-export"> <!-- Modal for Github export/import -->
	  <article>
	    <h5>Load your code from GitHub</h5>
	    <p>
	      Load a JSNB from public repositories on GitHub or private repositories where you have access. Will require access token. <a  target="_blank" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token#creating-a-fine-grained-personal-access-token">How to get access token?</a>
	    </p>
	    <input type='text' onchange="update_owner()" id='token' xplaceholder='Access Token'></input>
	    <input type='text' onchange="update_repos()" id='user' placeholder='Owner'></input>
	    <input list='repos' id='repo' placeholder='Repo'></input><datalist id='repos'></datalist>
	    <input type='text' id='path' placeholder='Path'></input>

	      <a href="#" data-target="git-import-export" onClick="event.preventDefault();toggleModal(event)" role="button" class="secondary">Cancel</a>
	      <a href="#" tabindex="0"   onclick="event.preventDefault();upload_to_git()" role="button">Push to Git</a>
	      <a href="#" tabindex="0" onclick="event.preventDefault();load_from_git()" role="button">Load from Git</a>
	     <footer>
	     	<p>The app does not store the access token on any server. It is stored only used to send requests to GitHub API. The notebook script cannot access this token as it is running in a sandboxed iframe.<p>
	     </footer>
	  </article>
	</dialog>
	
	<dialog id="options"> <!--Modal for Options -->
	  <article>
	    <h5>Options for Notebook</h5>
	    <input  id="run_on_load" data-tooltip="Run the code when the file is loaded" type="checkbox" class="cell-type"  ></input>
	    <label for="run_on_load">Run the code when the file is loaded</label>
	    <br>
	    <input  id="hide_menu_on_embed" data-tooltip="Hide the menu in iframe embedding" type="checkbox" class="cell-type"  ></input>
	    <label for="hide_menu_on_embed">Hide the menu in iframe embedding</label>
	    <br>
	    <input  id="hide_input_on_embed" data-tooltip="Hide the input cells in iframe embedding" type="checkbox" class="cell-type"  ></input>
	    <label for="hide_input_on_embed">Hide the input cells in iframe embedding</label>
	    
		
	  </article>
	</dialog>
	
	
  </body>
  <script>
  	insitialize_page(); <!-- Load the keyboard shortcuts and initialization scripts -->
  </script>

 </html>
